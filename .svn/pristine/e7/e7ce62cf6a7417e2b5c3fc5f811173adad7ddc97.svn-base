<?php

namespace App\Http\Controllers\ProductDevelopment;

use App\Http\Controllers\Controller;
use App\Models\Project;
use App\Models\Staff;

use DB;

class ProductDevelopmentController extends Controller
{
    /*
    public function __construct()
    {
        $this->middleware('auth');
    }
    */
    
    public function ProductList()
    {
        try {
            DB::beginTransaction();
            // database queries here
            
            $project = new Project;
            $project->id = "10";
            $project->save();
            
            
            DB::commit();
        } 
        catch (\PDOException $e)
        {
            DB::rollback();
            return $e;
        }
        
        
        $project =  DB::table('project')->get();
        //$project = Project::find(1);
        return $project;
        //return view('home');
    }
    public function UserList()
    {
        /*
        $UserConn = DB::connection('DB_companyStructure');
        $UserList = $UserConn->select('
            SELECT * 
            FROM companyStructure.staff
            WHERE id = 1'
        );
        */
        $Staff = new Staff;
        $u = $Staff::find(1);
        return $u;
    }

    public function phpinfo()
    {
        phpinfo();
    }

    public function text()
    {
        //insert
        $post = new Post;
        $post->title = 'Laravel 學習筆記';
        $post->content = 'Laravel 是一個 PHP Web 開發框架。';
        $post->save();

        //delect
        $post = Post::find(1);
        $post->delete();

        //update
        $post = Post::find(1);
        $post->content = '修改後的內容';
        $post->save();

        //select
        $posts = Post::all();
        Post::where('id','=',1)->get();
        Post::where('id','=',1)->first();

    }
}